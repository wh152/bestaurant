{% extends "base.html" %}
{% load staticfiles %}

{% block title_block %}
    Description Changed
{% endblock %}

{% block body_block %}
    <h5>
        <a href="{% url 'other:addRestaurant' %}">
            <button style="color: green; margin-right:25px;">
                Add
            </button>
        </a>
        <a href="{% url 'other:advertise' %}">
            <button style="color: green;">
                Advertise
            </button>
        </a>
    </h5>
    <br /> <br />
    <div>
        {% if restaurants %}
            {% for restaurant in restaurants %}
            <table class="table table-bordered table-sm">

                <tr scope="row">

                    {% if restaurant.logo %}
                    <td scope="col">
                        <img src="{{ MEDIA_URL }}{{ restaurant.logo }}" width="100" height="100">
                    </td>
                    {% endif %}
        
                <td scope="col">
                    <h5 style="color: goldenrod;">
                        {{ restaurant.restaurantName }}
                    </h5>
                    Category: {{ restaurant.category }}
                    <br />
                    Address: {{ restaurant.address }}
                    <br />
                    {% if restaurant.averageRating %}
                            {% for i in '0123456789' %}
                                {% if restaurant.averageRating >= forloop.counter %}
                                    <img src="{% static 'images/star.png' %}" width="25" height="25">
                                {% endif %}
                            {% endfor %}
                    {% else %}
                        Not Yet Reviewed
                    {% endif %}
                    <br />
                    <a href="{% url 'other:deleteRestaurant' restaurant.restaurantNameSlugged %}">
                        <button class="btn btn-confirm-delete" style="color: red;">
                            Delete
                        </button>
                    </a>
                    <br />
                </td>
                </tr>
            </table>
            {% endfor %}
        {% else %}
            <h6>
                No restaurants yet. Why not make one?
            </h6>
        {% endif %}
        <script>
            $(document).ready(function() {
                $('.btn-confirm-delete').click(function() {
                    return confirm('Are you sure you want to delete this?');
                });
            });
        </script>
    </div>
{% endblock %}