{% extends 'base.html' %}

{% block title_block %}
    {{ restaurant.restaurantName }}
{% endblock %}

{% block body_block %}
<div class = "restaurant">
    <table>
        <tr>
            {% if restaurant.logo %}
  
            <td>
                <img src="{{ MEDIA_URL }}{{ restaurant.logo }}" class="img-thumbnail" width="200" height="200">
            </td>
  
            {% endif %}
  
            <td>
                <h5>{{ restaurant.restaurantName }} </h5>
                
                owned by 
                <a href="{% url 'other:viewOneUser' restaurant.owner.username_slug %}">
                    {{ restaurant.owner.user.username }}
                </a>
            
                <p  class="card-title"><strong>Average Rating: </strong>
                    {% if restaurant.averageRating %}
                        <!--Star Rating Functionality-->
                            {% for i in '0123456789' %}
                                {% if restaurant.averageRating >= forloop.counter %}
                                    <img src="{% static 'images/star.png' %}" width="25" height="25">
                                {% endif %}
                            {% endfor %}
                    {% else %}
                        Not Yet Reviewed
                    {% endif %}
                </p>
                <strong>Category: </strong>{{ restaurant.category }}
                <br />
                <strong>Address: </strong>{{ restaurant.address }}
                <br />
                <!-- Review Links -->
                <a href="{% url 'other:reviewRestaurant' restaurant.restaurantNameSlugged %}">Rate and Review!</a>
                <br />
                <a href="{% url 'other:viewRestaurantReviews' restaurant.restaurantNameSlugged %}">See Reviews</a>
          </td>
        </tr>
      </table>
</div>

    <h5>
        <a href="{% url 'other:reviewRestaurant' restaurant.restaurantNameSlugged %}">Rate</a>
    </h5>
    {% if reviews %}
        <h3>
            Reviews
        </h3>
        <li>
            {% for review in reviews %}
                <hr>
                    {% if review.profile_photo_path %}
                        <img src="{{ MEDIA_URL }}{{ review.profile_photo_path }}" width="100" height="100">
                    {% else %}
                        <img src="{{ MEDIA_URL }}profile_images/default.jpg" width="100" height="100">
                    {% endif %}
                    <a href="{% url 'other:viewOneUser' review.reviewer.username_slug %}">
                        {{ review.reviewer.user.username }}
                    </a> rated {{ review.rating }}/10 stars on {{ review.date }}
                    <br />
                    Comment: {{ review.comment }}
                <hr />
            {% endfor %}
        </li>
    {% else %}
        <p>
            No reviews yet. Be the first!
        </p>
    {% endif %}
{% endblock %}