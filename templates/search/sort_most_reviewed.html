{% extends 'base.html' %}
{% load staticfiles %}


{% block title_block %}
    Most Reviewed
{% endblock %}

{% block body_block %}
<h1>Most Reviewed Restaurants</h1>
<ul>
    {% for restaurant in restaurants %}
    <div class = "restaurant">
      <tr scope="row">
          {% if restaurant.logo %}
          <td scope="col">
              <img src="{{ MEDIA_URL }}{{ restaurant.logo }}" class="img-thumbnail" width="100" height="100">
              <strong>{{ restaurant.restaurantName }} </strong>owned by 
              <a href="{% url 'other:viewOneUser' restaurant.owner.username_slug %}">
                  {{ restaurant.owner.user.username }}
              </a>
          </td>
          {% else %}
          <td scope="col">
              {{ restaurant.restaurantName }}
          </td>
          {% endif %}

        <td scope="col">
          <p  class="card-title"><strong>Average Rating: </strong>
              {% if restaurant.averageRating %}
                  <!--Star Rating Functionality-->
                      {% for i in '0123456789' %}
                          {% if restaurant.averageRating >= forloop.counter %}
                              <img src="{% static 'images/star.png' %}" width="25" height="25">
                          {% endif %}
                      {% endfor %}
              {% else %}
                  Not Yet Reviewed
              {% endif %}
          </p>
          <strong>Category: </strong>{{ restaurant.category }}
          <br />
          <strong>Address: </strong>{{ restaurant.address }}
          <br />
          <!-- Review Links -->
          <a href="{% url 'other:reviewRestaurant' restaurant.restaurantNameSlugged %}">Rate and Review!</a>
          <br />
          <a href="{% url 'other:viewRestaurantReviews' restaurant.restaurantNameSlugged %}">See Reviews</a>
        </td>
      </tr>
  </div>
  <br /> <br />
    {% endfor %}
</ul>

{% endblock %}